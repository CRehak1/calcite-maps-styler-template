<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=7,IE=9,IE=10" />
  <title>
  </title>
  <link rel="stylesheet" type="text/css" href="//js.arcgis.com/3.8/js/dojo/dijit/themes/tundra/tundra.css">
  <link rel="stylesheet" type="text/css" href="//js.arcgis.com/3.8/js/esri/css/esri.css" />
  <link rel="stylesheet" type="text/css" href="css/layout.css"/>

   <script type="text/javascript">
    var path_location = location.pathname.replace(/\/[^/]+$/, '');
    var dojoConfig = {
      parseOnLoad: true,
  	  packages:[
  		  {name:"esriTemplate",location: path_location},
        {name:"utilities",location: path_location + "/javascript" },
        {
         name: "templateConfig",
          location: path_location.substr(0,path_location.lastIndexOf('/HeaderFooter')) 
        }
  	  ]
    };
  </script>

  <script type="text/javascript" src="//js.arcgis.com/3.8/">
  </script>
  <script type="text/javascript" src="javascript/layout.js">
  </script>
  <script type="text/javascript">
    dojo.require("esri.widgets");
    dojo.require("esri.layout");
    dojo.require("utilities.app");
    dojo.require("templateConfig.commonConfig");

  function init(){

    console.log(commonConfig);
    var defaults = {
      //The ID for the map from ArcGIS.com
      webmap : "dbd1c6d52f4e447f8c01d14a691a70fe",
      //The application id for a configured application
      appid:"",
      //Specify a theme for the template. Valid options are (seaside, pavement, chrome).
      theme:"chrome",
      //Enter a title, if no title is specified, the webmap's title is used.
      title : "",
      //Enter a subtitle, if not specified the ArcGIS.com web map's summary is used
      subtitle : "",
      owner:"",
      sharingurl:"",
      proxyurl:"",
    //add default template options. This includes the bing key, sharing url, proxy url, 
    //and any service urls (geometry, geocode, print) 
    //that may be needed by the template.
      bingmapskey: commonConfig.bingMapsKey,
      helperServices:commonConfig.helperServices    
    };


    var app = new utilities.App(defaults);
    app.init().then(function(options){
      initMap(options);
    });

 }
    //show map on load
  dojo.addOnLoad(init);
  </script>
</head>

<body class="tundra">
  <div id="mainWindow" dojotype="dijit.layout.BorderContainer" design="headline"
  gutters="false" style="width:100%; height:100%;">
    <!-- Header Section-->
    <div id="header" dojotype="dijit.layout.ContentPane" region="top">
      <div id="title"></div>
      <div id="subtitle"></div>
      <div id="header_flourish"></div>
    </div>

    <!-- Map Section -->
    <div id="map" dojotype="dijit.layout.ContentPane" region="center" dir="ltr">
    </div>
    <!-- Footer Section-->
    <div id="footer" dojotype="dijit.layout.ContentPane" region="bottom">
      <span id='footerText'></span>
      <span id="owner">
      </span>
    </div>

  </div>
</body>

</html>
