<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=7,IE=9,IE=10" />
    <title></title>
    <link rel="stylesheet" type="text/css" href="//js.arcgis.com/3.7/js/dojo/dijit/themes/tundra/tundra.css">
    <link rel="stylesheet" type="text/css" href="//js.arcgis.com/3.7/js/dojo/dojox/layout/resources/ExpandoPane.css"/>
    <link rel="stylesheet" type="text/css" href="//js.arcgis.com/3.7/js/dojo/dojo/resources/dnd.css"/>


  <link rel="stylesheet" type="text/css" href="//js.arcgis.com/3.7/js/esri/css/esri.css" />

    <link rel="stylesheet" type="text/css" href="./css/dnd.css"/>
    <link rel="stylesheet" type="text/css" href="./css/layout.css"/>

   <script type="text/javascript">
    var path_location = location.pathname.replace(/\/[^/]+$/, '');
    var dojoConfig = {
      parseOnLoad: true,
      packages:[
        {
          name:"esriTemplate",
          location: path_location
        },
        {
          name:"utilities",
          location: path_location + "/javascript" 
        },
        {
         name: "templateConfig",
          location: path_location.substr(0,path_location.lastIndexOf('/Compare')) 
        }
      ]
    };
  </script>
    
    <script type="text/javascript" src="//js.arcgis.com/3.7/">    
    </script>

    <script type="text/javascript" src="./javascript/layout.js"></script>
    <script type="text/javascript">
      dojo.require("esri.layout");

      dojo.require("dojox.layout.ExpandoPane");
      dojo.require("utilities.app");
      dojo.require("templateConfig.commonConfig");   
      
       function init(){

           var defaults = {
                webMaps: [{
                  'id': '4ff792a3962547caad2d924413c40985'
                }, {
                  'id': '8ee873d16c424960a185aad57139328d'
                }, {
                  'id': 'fb4a7cc496f144bd8d68b4b1d4804b5d'
                }],
                appid:"",
                theme: "blue",
                title: null,
                searchurl: "",
                sharingurl:"",
                proxyurl:"",
               //add default template options. This includes the bing key, sharing url, proxy url, 
               //and any service urls (geometry, geocode, print) 
               //that may be needed by the template.
                bingmapskey: commonConfig.bingMapsKey,
                helperServices:commonConfig.helperServices    
            };
     
            var app = new utilities.App(defaults);
            app.init().then(function(options){
              initMap(options);
            });


          }
      

      // CALL INIT FUNCTION WHEN APPLICATION LOADS
      dojo.addOnLoad(init);

      
    </script>
  </head>
  <body id="previewApp" class="tundra" link="gold" vlink="darkgoldenrod" alink="yellow">
    <div id="mainWindow" dojotype="dijit.layout.BorderContainer" design="headline" gutters="false">
      <div id="topPane" dojoType="dijit.layout.BorderContainer" region="top" gutters="false">
        <div dojoType="dijit.layout.ContentPane" region="center">
          <div id="title"></div>
        </div>
      </div>
      <div dojoType="dijit.layout.BorderContainer" region="center" design="sidebar" gutters="false">
        <div id="centerPane" dojoType="dijit.layout.BorderContainer" region="center">
          <div id="mapContainer.0" class="mapContainer" dojoType="dijit.layout.BorderContainer" region="left" style="width:33%;" dir="ltr">
            <div id="city.0" class="compareCity" dojoType="dijit.layout.ContentPane" region="top"></div>
            <div id="map.0" class="compareMap" dojoType="dijit.layout.ContentPane" region="center"></div>
            <div id="info.0" class="compareInfo" dojoType="dijit.layout.StackContainer" region="bottom">
              <div id="info.0.description" class="infoPanel" dojoType="dijit.layout.ContentPane"></div>
              <div id="info.0.content" class="infoPanel" dojoType="dijit.layout.ContentPane"></div>
              <div id="info.0.legend" class="infoPanel" dojoType="dijit.layout.ContentPane"></div>
            </div>
          </div>
          <div id="mapContainer.1" class="mapContainer" dojoType="dijit.layout.BorderContainer" region="center" dir="ltr">
            <div id="city.1" class="compareCity" dojoType="dijit.layout.ContentPane" region="top"></div>
            <div id="map.1" class="compareMap" dojoType="dijit.layout.ContentPane" region="center"></div>
            <div id="info.1" class="compareInfo" dojoType="dijit.layout.StackContainer" region="bottom">
              <div id="info.1.description" class="infoPanel" dojoType="dijit.layout.ContentPane"></div>
              <div id="info.1.content" class="infoPanel" dojoType="dijit.layout.ContentPane"></div>
              <div id="info.1.legend" class="infoPanel" dojoType="dijit.layout.ContentPane"></div>
            </div>
          </div>
          <div id="mapContainer.2" class="mapContainer" dojoType="dijit.layout.BorderContainer" region="right" style="width:33%;" dir="ltr">
            <div id="city.2" class="compareCity" dojoType="dijit.layout.ContentPane" region="top"></div>
            <div id="map.2" class="compareMap" dojoType="dijit.layout.ContentPane" region="center"></div>
            <div id="info.2" class="compareInfo" dojoType="dijit.layout.StackContainer" region="bottom">
              <div id="info.2.description" class="infoPanel" dojoType="dijit.layout.ContentPane"></div>
              <div id="info.2.content" class="infoPanel" dojoType="dijit.layout.ContentPane"></div>
              <div id="info.2.legend" class="infoPanel" dojoType="dijit.layout.ContentPane"></div>
            </div>
          </div>
        </div>
        <div id="searchExpandoPane" dojoType="dojox.layout.ExpandoPane" region="left" title="" startExpanded="true" style="width:225px; font-size:11pt;">
          <div id="searchPanel" dojoType="dijit.layout.BorderContainer" region="center" gutters="false" style="height:150px;">
            <div id="saveWebMapsPanel" dojotype="dijit.layout.ContentPane" region="top" style="height:40px; padding:5px; overflow:hidden;">
              <span style="font-weight:bold;" id='saveLabel'></span>
              <img id="saveWebMapsImg" src="./images/GenericSave_B_22_disabled.png"  align="absmiddle" onclick="saveUserConfig();"/><img id="clearWebMapsImg" src="./images/GenericSave_B_22_clear.png"  align="absmiddle" onclick="clearUserConfig();"/>
              <div id="saveWebMapsMsg" style="margin-left:5px; color:darkslategray; font-size:smaller; font-style:italic;"></div>
            </div>
            <div id="searchContainer" dojoType="dijit.layout.BorderContainer" region="center" gutters="false" style="padding:6px;">
              <div dojotype="dijit.layout.ContentPane" region="top" style="height:75px; padding-top:5px;">
                <div style="font-weight:bold;" id='findLabel'></div>
                <div id="searchText" dojotype="dijit.form.TextBox" value=""  onkeypress="searchKey" style="width:150px; padding:2px; color:darkslategray;"></div>
                <img id='searchImage' src="images/GenericSearch22.png" align="absmiddle"  style="cursor:pointer;" onclick="searchArcGIS();"/>
                <div id="searchInfo" style="font-size:smaller; font-weight:bold; padding-left:15px;"></div>
              </div>
              <div dojotype="dijit.layout.BorderContainer" region="center" gutters="false" style="margin:3px; overflow:auto;">
                <div id="searchResults" class="container"></div>
              </div>
            </div>
          </div>
        </div>
        <div id="bottomContainer" dojoType="dijit.layout.ContentPane" region="bottom">
          <table id="bottomPane" width="100%" border="0">
            <tr height="20px">
              <td colspan="2" id='mapHeader'></td>
              <td colspan="2" id='syncHeader'></td>
              <td colspan="2"></td>
            </tr>
    <tr height="40px">
              <td width="15%">
                <div>
                  <input id="displayDescription" name="mapInformation" dojoType="dijit.form.RadioButton" onclick="setInformaitonType(_mapInfoType.description);" style="margin:4px;" checked/>
                  <label for="displayDescription" id='descriptionLabel'></label>
                </div>
                <div>
                  <input id="displayContent" name="mapInformation" dojoType="dijit.form.RadioButton" onclick="setInformaitonType(_mapInfoType.content);" style="margin:4px;"/>
                  <label for="displayContent" id='contentLabel'></label>
                </div>
                <div>
                  <input id="displayLegend" name="mapInformation" dojoType="dijit.form.RadioButton" onclick="setInformaitonType(_mapInfoType.legend);" style="margin:4px;"/>
                  <label for="displayLegend" id='displayLegendLabel'></label>
                </div>
              </td>
              <td width="10%"></td>
              <td width="25%" valign="top">
                <div>
                  <input id="syncScale" name="syncMaps" dojoType="dijit.form.CheckBox" onclick="synchronizeScale();" style="margin:4px;"/>
                  <label for="syncScale" id='scaleLabel'></label>
                </div>
                <div>
                  <input id="syncLocation" name="syncMaps" dojoType="dijit.form.CheckBox" onclick="synchronizeLocation();" style="margin:4px;"/>
                  <label for="syncLocation" id='locationLabel'></label>
                </div>                
              </td>
              <td width="10%"></td>
              <td rowspan="2">
                
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
    <div id="loadingDialog" dojoType="dijit.Dialog" title="Compare Web Maps">
      <div id="loadingDialogContent">
        <div id="loadingMessage"></div>
        <img id='loadingImage' src="images/progressBar.gif"  />
      </div>
    </div>
  </body>
</html>